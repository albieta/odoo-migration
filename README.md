</style></head><body><article id="1200b6da-0733-4eda-8c1e-8feda7bade75" class="page sans"><header><h1 class="page-title">Odoo MIGRATIONS</h1></header><div class="page-body"><p id="d7e1643c-f861-4e8d-9b13-ef1ebe5bdcb8" class=""><strong>OCA/OpenUpgrade</strong></p><p id="402b8ef3-207c-46a2-a8b8-0929c97c6206" class=""><em>To run migrations across multiple versions, you need to run each version of OpenUpgrade in order ðŸ˜…</em></p><ol type="1" id="ce14b868-4a72-4871-be7f-15f4ce2507bb" class="numbered-list" start="1"><li><em>Check coverage of the migration scripts for your installed modules</em></li></ol><p id="1aa61694-b211-4b6d-8ec5-634a8af15783" class=""><em>If there are modules for which no migration scripts have been developed yet, your migration may fail or the integrity of your database may be lacking. </em></p><p id="9f790f7b-bc38-4ee6-b229-28f952c59e91" class="">Activate the developer mode, go to Apps and filter by Installed. manually check the names (in pink) on the list of modules available for migration (<a href="https://oca.github.io/OpenUpgrade/status.html">https://oca.github.io/OpenUpgrade/status.html</a>) Uninstall those modules which do not apear on the list or are marked as â€˜Emptyâ€™/â€™Work in progressâ€™. This is because there are no migration scripts available in the current OpenUpgrade.</p><figure id="3a23ba69-2241-45f2-9a75-87b638555295" class="image"><a href="media/Untitled.png"><img style="width:1794px" src="media/Untitled.png"/></a></figure><ol type="1" id="0c8fb14e-c906-4be6-a2f6-f76f0ca93e2d" class="numbered-list" start="2"><li><em>Do a backup of the current database (as a zip)</em></li></ol><ol type="1" id="12a32513-cd68-4896-b62e-b57dfebf7eaa" class="numbered-list" start="3"><li><em>Prepare migration environment â†’</em> </li></ol><p id="4fe4c790-a38f-4889-b343-654d73effeb9" class="">Clone the odoo-migration repository from git in order to proceed with the migration steps: <a href="https://github.com/albieta/odoo-migration">https://github.com/albieta/odoo-migration</a>. You will have 4 odoo projects ready with the necessary openupgrade scripts prepared. </p><figure id="c4619b21-d16f-4665-a0c7-03e552f3f862" class="image"><a href="media/Untitled%201.png"><img style="width:448px" src="media/Untitled%201.png"/></a></figure><ol type="1" id="fed7e799-a9b3-422c-aa85-a764c4ad8539" class="numbered-list" start="4"><li><em>Migration from v12 to v13</em></li></ol><p id="7f7a3ba8-b0c6-4d19-8627-db4909b14170" class="">If you already prepared a backup as described in step 1. you can proceed by bringing up the <strong><em>odoo-v13</em></strong> with the docker-compose. </p><p id="5d79778b-a1d5-4a63-9d91-2dcf1f0280de" class="">Open <a href="http://localhost:8069/web/database/selector">http://localhost:8069</a> and choose to <strong>restore a database</strong>. Upload the zip from the backup of version 12. The following warning will apear as the version of the database is not compatible. </p><figure id="0e2c288d-19c0-470d-a3ac-b2ee764c1962" class="image"><a href="media/Untitled%202.png"><img style="width:569px" src="media/Untitled%202.png"/></a></figure><p id="b676ed94-fe2a-47be-baee-3e5642eefa14" class="">Now enter the bash of the odoo running container, and from there â†’</p><p id="ee06741f-805b-47ac-a2a8-f62d7a0d2819" class=""> <code>cd /mnt/extra-addons/OpenUpgrade13</code></p><p id="34851687-3e2f-40dd-8b6e-4c5f46db8bd4" class=""> <code>./odoo-bin --database=[database name] --config=/etc/odoo/odoo.conf --update all --stop-after-init</code></p><p id="b99b8cf5-2623-433e-8100-29c422b7c9e0" class="">Reloading the odoo url, now the warning should be gone â†’</p><figure id="16f0088c-a09e-4753-9148-14dd1d8e9a4e" class="image"><a href="media/Untitled%203.png"><img style="width:553px" src="media/Untitled%203.png"/></a></figure><p id="2e2d0ba6-3a10-42d2-982f-ae84c2cf5d00" class="">You could click on it and check everything should have migrated correctly. </p><p id="a5e22ea6-d958-4ed5-85c9-adcfbde2ed48" class="">Proceed with doing a backup of this current database so you have a zip in version 13. </p><ol type="1" id="6ce3c0ee-1e9a-452d-bf56-a851cd98396b" class="numbered-list" start="5"><li><em>Migration from v13 to v14 and v14 to v15 (same procedure)</em></li></ol><p id="a0e2da09-1941-4327-a0c2-2382e07ffea3" class="">Run now the docker-compose for odoo v14, restore the database from the v13 zip. Same warning will apear. Go to the bash from the odoo container again, and from there â†’</p><p id="6bb8213f-75ec-451c-a18a-a22b7fad1445" class=""><code>cd /var/lib/odoo</code></p><p id="daf82a7b-0ecb-4106-b3c1-0ddd73e7877b" class=""><code>odoo -d [name database] -u all --stop-after-init</code></p><p id="05b62bff-8fc4-47b5-8447-06cacb5f2a15" class="">Once the upgrade is finished, reload the odoo url and check everything should be fine. </p><p id="a0521687-15b5-4dff-bbdb-3b081d65a932" class="">Do a backup for this version 14 and repeat the exact same steps with odoo-v15. </p><p id="dced956d-efb4-4816-b6bc-2d1ad625c775" class="">
</p><p id="6e515bd3-1589-4db9-ad5b-bc582e66c18f" class=""><strong><em>You should be ready to go :) </em></strong></p><p id="8b22a33a-93c9-445e-bcca-f42d2e4bcad5" class="">
</p><p id="b71634cc-89d9-4429-b4d7-da6143adf050" class="">
</p><p id="992a2b76-c461-4f07-96b9-fee34466ec0d" class="">
</p></div></article></body></html>